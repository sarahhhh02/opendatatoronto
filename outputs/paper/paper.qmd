---
title: "Annual Report on Homicides in Toronto: An Overview of Police Related Statistics on Homicidal Crimes"
author: 
  - Sarah Lee
thanks: "Code and data are available at: LINK."
date: today
date-format: long
abstract: "Recognizing the importance of safety is to keep awareness of the homicide rates in Toronto and its surrounding factors. The dataset retrieved from OpenDataToronto keeps cases of homicide records between 2004 to 2023 covering Toronto. With this dataset, it is shown that there was a major drop of homicide cases through 2010 and 2011, carrying a consistent trend until 2015 and then picking up a considerable increase trend. On the whole, the most noticable factor is shootings being the most common homicide method."
format: pdf
toc: true
number-sections: true
bibliography: references.bib
---

```{r}
#| include: false
#| warning: false
#| message: false

#### Workspace set-up ####

## Load packages
library(opendatatoronto)
library(tidyverse)
library(knitr)
library(dplyr)
library(janitor)
library(ggplot2)
library(gt)

#### Load Data ####
edited_homicides_data <- read.csv(here::here("outputs/data/edited_homicides_data.csv"))
show_col_types = FALSE
```

# Table of Contents

**1 Introduction**

**2 Data**

**3 Discussion**

# Introduction

Violence is exposed all over the world whether you like it or not. As citizens, it is important to understand and recognize the trends and distributions of homicide rates. Studying homicide rates not only motivates you for your safety and well-being but also delves into all the underlying factors that play into homicides. This paper explores the distribution of homicide rates between 2004 and 2023 along with its predominant methods. As well as recognizing where these distributions were located in Toronto, Canada. 

This paper uses the data set from the OpenDataToronto (@ropendatatoronto) portal. To be specific, the open data is retrieved from the "Police Annual Statistical Report - Homicides" (@citehomicidedata). This data set records numerous cases of homicides in Toronto with its relevant factors. Factors playing out are the location, year, day, month, day of the week, police division, and its unique ID case. With this data set, I plan to use the R programming language (@citeR) with its relevant tools like Tidyverse (@rtidyverse), janitor (@rjanitor), knitr (@rkintr), dplyr (@rdplyr), and lubridate (@rlubridate). With the use of this language, I will analyze the types of trends and patterns to how homicide rates play. 


# Data {#sec-data}

The original data set that was retrieved from the Open Data Toronto portal (@ropendatatoronto) which includes all cases of homicides from 2004 to 2023. In this data set, there includes the dates consisting of the year, month, day, and the days of the week. Moreover, it contains the details of what type of homicide it is and the location by its nearby neighborhood. Taking this data set, I cleaned the data by using the select() function to keep only the columns of data I was going to use for this paper.

```{r}
#| message: false
#| echo: false
#| tbl-cap: Total Homicide Cases per Year
#| #| label: tbl-homicidetypecounts

# Assuming 'occurrence_year' is the column containing the year information
homicides_by_year <- edited_homicides_data |>
  group_by(year) |>
  summarise(total = n())

knitr::kable(homicides_by_year,'markdown',col.names = c("Year", "Total Homicides"), align = 'c')

```

```{r}
#| message: false
#| echo: false
#| tbl-cap: Total Count of Each Homicide Type
#| label: tbl-homicidetypecount

homicides_by_type <- edited_homicides_data |>
  group_by(homicide_type) |>
  summarise(total = n())

kable(homicides_by_type, format = "html", col.names = c("Homicide Types", "Total"), align = 'c')

```
## First data point {#sec-first-point}

```{r}
#| label: fig-1
#| fig-cap: Homicide Occurences from 2004-2023 Yearly

#Line graph of total homicides per year
data <- read.csv(here::here("outputs/data/edited_homicides_data.csv"))

homicides_by_year <- data |>
  group_by(year) |>
  summarise(Homicides = n())

homicides_by_year |>
 ggplot(aes(x = year, y = Homicides)) +  
  geom_line(stat = "identity") + 
  theme_minimal() + 
  labs(x = "Year", y = "Number of Homicides")
```

## Second data point {#sec-second-point}
```{r} 
#| label: fig-2

data <- read.csv(here::here("outputs/data/edited_homicides_data.csv"))

homicides_by_location <- data |> 
  count(hood_158)

homicides_by_location|>
  ggplot(aes(x = hood_158, y = n)) +
  geom_bar(stat = "identity") + 
  theme_minimal() +
  labs(x = "Neighbourhoods", y = "Number of Homicides")

```

# Discussion




\newpage

# References
